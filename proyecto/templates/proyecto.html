
{% extends 'base.html' %}

{% block content %}   

    
  <div class="col-10 offset-1"> 
    <br>
    <h2><strong>PROYECTOS</strong></h2>
    <hr>
    <div class="row">
      <div class="col">
        <a class="btn btn-outline-primary mx-2" href="{% url 'proyecto_crear' %}">

          Crear Nuevo Proyecto

        </a>
      </div>
      <div class="col">
        <form action="" method="POST" class="d-flex">
          {% csrf_token %}
          <input type="search" value="{{query}}" name="searchquery" class="form-control" placeholder="Buscar...">
          <button class="btn btn-success mx-2" name="search">Buscar</button>
        </form>
      </div>
    </div>
    <hr>
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-primary">
          <tr>
            <th scope="col">ESTATUS</th>
            <th scope="col">PROYECTO</th>
            <th scope="col">CENTRO</th>
            <th scope="col">RESPONSABLE</th>
            <th scope="col">TELEFONO</th>
            <th scope="col" class="text-center">DETALLE</th>
          </tr>
        </thead>
        <tbody>
            {% if entity %}
                {% for proyecto in entity %}
                    <tr>
                        {% if proyecto.estatus == "ACTIVO" %}
                          <td class="text-success fw-bold">{{proyecto.estatus}}</td>
                        {% else %}
                          <td class="text-danger fw-bold">{{proyecto.estatus}}</td>
                        {% endif %}
                        <td>{{proyecto.proyecto}}</td>
                        <td>{{proyecto.nombre_centro}}</td>
                        <td>{{proyecto.representante}}</td>
                        <td>{{proyecto.telefono}}</td>
                        <td class="text-center"> <a href="{% url 'proyecto_detalle' proyecto.id %}"><i class="bi bi-pencil-square"style="font-size: 1.2rem; color: blue;"></i></a> </td>
                    </tr>
                {% endfor %}
            {% endif%}
        </tbody>
      </table>
      <div>
          {% include 'paginator.html' %}
      </div>

    </div>
  </div>
     

  <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#exp_proyecto">Exportar Excel Proyecto</a>


<!-- Modal exp_proyecto -->
<div class="modal fade" id="exp_proyecto"  data-bs-keyboard="false" tabindex="-1" aria-labelledby="exp_proyectoLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h1 class="modal-title fs-5" id="exp_proyectoLabel">Exportar Proyecto Completo</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
            <div class="container">
              <div class="col-6">
                <label for="">Proyecto: </label>
                <input type="text" name="proye" class="form-control" required placeholder="Proyecto">
              </div>
            </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <a href="{% url 'exportar_proyecto' %}" role="button" class="btn btn-info"> Exportar </a>
          </div>
      </div>
  </div>
</div>


   
{% endblock %}

{% extends 'base.html' %}

{% block content %}   

{% load crispy_forms_tags %}


<div class="row">
    <div class="col-md-12">
        <div class="tile row">
            <div class="col-md-3 " style="padding: 20px;">
                <div id="external-events">
                    <h3 class="mb-4">Tareas Pendientes</h3>
                    {% for event in events_month %}
                      <div class="fc-event">
                          <h4>{{ event.titulo }}</h4>
                          <p>{{ event.descripcion }}</p>
                          <p>Desde: {{ event.fecha_inicio }}</p>
                          <p>Hasta: {{ event.fecha_fin }}</p>
                          <hr>
                      </div>
                    {% empty %}
                      <p>No hay Tareas para mostrar</p>
                    {% endfor %}
                </div>
            </div>
            <div class="col-md-9">
                <div id="calendar" class="container" style="padding: 20px;"></div>
            </div>
            <script>

                document.addEventListener('DOMContentLoaded', function() {
                  var calendarEl = document.getElementById('calendar');
                  var today = new Date();
                  var calendar = new FullCalendar.Calendar(calendarEl, {
                    headerToolbar: {
                      left: 'prev,next today',
                      center: 'title',
                      right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
                    },
                    initialDate: today,
                    navLinks: true, // can click day/week names to navigate views
                    businessHours: true, // display business hours
                    editable: true,
                    selectable: true,
                    selectMirror: true,
                    dayMaxEvents: true, // allow "more" link when too many events
                    editable: true,
                    dayMaxEvents: true, // allow "more" link when too many events


                    events: [
                      {% for tarea in events %}
                      {
                        title: '{{tarea.titulo}}',
                        start: '{{tarea.fecha_inicio | date:"Y-m-d"}}',
                        end: '{{tarea.fecha_fin | date:"Y-m-d"}}',
                      },
                      {% endfor %}
                    ]
                  });
              
                  calendar.render();
                  calendar.setOption('locale', 'es');
                });
              
            </script>

        </div>
    </div>
</div>








{% endblock content %}







{% extends 'base.html' %}

{% block content %}   

{% load crispy_forms_tags %}

<br>
<div class="container bg-light card shadow-md p-5 shadow p-3 mb-5 form-layout">
                
    <h4 class="text-center">Detalle Registro Antropométrico</h4>
    <hr>
    <div class="tabcontent" id="metric">

        <div class="col-12 text-center">
            <strong> NOMBRE DEL MENOR EN CONSULTA</strong>
            <div class="col-12 text-center">
                {{menor_detalles}}
            </div>
            <br>
        </div>

        <div class="row">
            <div class="col-4">
                <P> <strong> Peso: </strong> {{imc_menores.peso}} Kg</p>
            </div>

            <div class="col-4">
                <P> <strong> Talla: </strong> {{imc_menores.talla}} cm</p>
            </div>

            <div class="col-4">
                <P> <strong> CBI: </strong> {{imc_menores.cbi}} cm</p>
            </div>
        </div>
        <div class="row">
            <div class="col-4">
                <P> <strong> PTR: </strong> {{imc_menores.ptr}} cm</p>
            </div>

            <div class="col-4">
                <P> <strong> PSE: </strong> {{imc_menores.pse}} cm</p>
            </div>

            <div class="col-4">
                <P> <strong> CC: </strong> {{imc_menores.cc}} cm</p>
            </div>
        </div>
        <div class="col-12 text-center">
            <h4><strong> IMC: </strong> {{imc_menores.imc}} Kg/m²</h4>
        </div>
      
    </div>

    {% if imc_menores.imc %}
        <div class="row">
            <div class="col-6">
                <div id="main" style="width: 200px;height:150px;"></div>

                <script type="text/javascript">
                    var col1 = '{{diagnosticos.color1}}';
                    var col2 = '{{diagnosticos.color2}}';
                    var col3 = '{{diagnosticos.color3}}';
                    var col4 = '{{diagnosticos.color4}}';
                    var col5 = '{{diagnosticos.color5}}';
                    var datos = {{peso}};
                    var min = {{minimo}};
                    var max = {{maximo}};
                    var chartDom = document.getElementById('main');
                    var myChart = echarts.init(chartDom);
                    var option;

                    option = {
                        series: [
                        {
                            type: 'gauge',
                            startAngle: 180,
                            endAngle: 0,
                            center: ['50%', '75%'],
                            radius: '130%',
                             min: min,
                            max: max,
                            splitNumber: 10,
                            axisLine: {
                              lineStyle: {
                                width: 20,
                                color: [
                                    [0.1, col1],
                                    [0.2, col2],
                                    [0.3, col3],
                                    [0.4, col4],
                                    [0.5, col5],
                                    [0.6, col5],
                                    [0.7, col4],
                                    [0.8, col3],
                                    [0.9, col2],
                                    [1, col1]
                                    
                                  ]  
                                }
                              },
                              pointer: {
                                icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                                length: '15%',
                                width: 20,
                                offsetCenter: [0, '-60%'],
                                itemStyle: {
                                  color: '#464646'
                                }
                              },
                              axisTick: {
                                length: 12,
                                lineStyle: {
                                  color: 'auto',
                                  width: 2
                                }
                              },
                              splitLine: {
                                length: 20,
                                lineStyle: {
                                  color: 'auto',
                                  width: 5
                                }
                              },
                              axisLabel: {
                                color: '#464646',
                                fontSize: 12,
                                distance: -45,
                                rotate: 'tangential',
                                formatter: function (value) {
                                  return '';
                                }
                              },
                              title: {
                                offsetCenter: [0, '10%'],
                                fontSize: 15
                              },
                              detail: {
                                fontSize: 30,
                                offsetCenter: [0, '-10%'],
                                valueAnimation: true,
                                color: '#464646'
                              },
                              data: [
                                {
                                  value: datos,
                                  name: 'Kg.'
                                }
                              ]
                            }
                          ]
                        };

                        option && myChart.setOption(option);
     
                </script>
            </div>



            <div class="col-6">
              <div id="main2" style="width: 200px;height:150px;"></div>

              <script type="text/javascript">
                  var col1 = '{{diagnosticos.color1}}';
                  var col2 = '{{diagnosticos.color2}}';
                  var col3 = '{{diagnosticos.color3}}';
                  var col4 = '{{diagnosticos.color4}}';
                  var col5 = '{{diagnosticos.color5}}';
                  var datos = {{peso}};
                  var min = {{minimo}};
                  var max = {{maximo}};
                  var chartDom = document.getElementById('main2');
                  var myChart = echarts.init(chartDom);
                  var option;

                  option = {
                      series: [
                      {
                          type: 'gauge',
                          startAngle: 180,
                          endAngle: 0,
                          center: ['50%', '75%'],
                          radius: '130%',
                           min: min,
                          max: max,
                          splitNumber: 10,
                          axisLine: {
                            lineStyle: {
                              width: 20,
                              color: [
                                  [0.1, col1],
                                  [0.2, col2],
                                  [0.3, col3],
                                  [0.4, col4],
                                  [0.5, col5],
                                  [0.6, col5],
                                  [0.7, col4],
                                  [0.8, col3],
                                  [0.9, col2],
                                  [1, col1]
                                  
                                ]  
                              }
                            },
                            pointer: {
                              icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                              length: '15%',
                              width: 20,
                              offsetCenter: [0, '-60%'],
                              itemStyle: {
                                color: '#464646'
                              }
                            },
                            axisTick: {
                              length: 12,
                              lineStyle: {
                                color: 'auto',
                                width: 2
                              }
                            },
                            splitLine: {
                              length: 20,
                              lineStyle: {
                                color: 'auto',
                                width: 5
                              }
                            },
                            axisLabel: {
                              color: '#464646',
                              fontSize: 12,
                              distance: -45,
                              rotate: 'tangential',
                              formatter: function (value) {
                                return '';
                              }
                            },
                            title: {
                              offsetCenter: [0, '10%'],
                              fontSize: 15
                            },
                            detail: {
                              fontSize: 30,
                              offsetCenter: [0, '-10%'],
                              valueAnimation: true,
                              color: '#464646'
                            },
                            data: [
                              {
                                value: datos,
                                name: 'Cm.'
                              }
                            ]
                          }
                        ]
                      };

                      option && myChart.setOption(option);
   
              </script>
          </div>

            <div  class="col-6 text-center" >
                <p class="text-center"><strong>DIAGN. PESO</strong></p>
                    <div class="text-white p-1"style="background-color:{{diagnosticos.color5}}">{{imc_menores.diagnostico}}</div>  
            </div>
            
            <div  class="col-6 text-center" >
                <p class="text-center"><strong>DIAGN. TALLA</strong></p>
                {% if imc_menores.diagnostico_talla == "TALLA BAJA" %}
                    <div class="text-bg-danger p-1">TALLA BAJA</div>  
                {%elif imc_menores.diagnostico_talla == "RIESGO TALLA BAJA" %}
                    <div class="text-bg-warning p-1">RIESGO TALLA BAJA</div>  
                {%elif imc_menores.diagnostico_talla == "TALLA NORMAL" %}
                    <div class="text-bg-success p-1">TALLA NORMAL</div>  
                {%elif imc_menores.diagnostico_talla == "RIESGO TALLA ALTA" %}
                    <div class="text-bg-warning p-1">RIESGO TALLA ALTA</div>
                {%elif imc_menores.diagnostico_talla == "TALLA ALTA" %}
                    <div class="text-bg-info p-1">TALLA ALTA</div>
                {% endif %}
            </div>


        </div>
        <br>

        <div class="row">
            <div class="col-12">
                <P class="text-center"> <strong> Presenta Riesgo: </strong> {{imc_menores.riesgo}} </p>
            </div>

            <div class="col-4">
                <P> <strong> Servicio: </strong> {{imc_menores.servicio}} </p>
            </div>

            <div class="col-4">
                <P> <strong> Centro: </strong> {{imc_menores.centro_hospital}} </p>
            </div>

            <div class="col-4">
                <P> <strong> Observación: </strong> {{imc_menores.observacion}} </p>
            </div>
        </div>
        
            <!-- ########  Menu de opciones  ##########-->
        <br>
        <hr>
        <div class="container">
            <a href="{% url 'menor_detalle' pk beneficiarios.id %}" class="btn btn-secondary"> Regresar </a>
                
            &nbsp
            <a href="{% url 'imc_menor_eliminar' pk beneficiarios.id imc_menores.id %}" role="button" class="btn btn-danger"> Eliminar </a>
                
        </div>
    
    {% endif %}

</div>

{% endblock %}